<engine>
 <description>
  Sample XML configuration file for the following ESP model:
  Orders[src + csv read connector]  ====> TotalVolume[aggr]

  so we:
  1. automatically start populating the Orders window
  from the orders.csv file using a built-in file/socket
  connector.

  2. aggregate the orders by security, and compute the total
  volume traded for the aggregate security.

  to test this model one can:

  subscribe to the final TotalVolume window to see the
  computed data when we start the trades data flowing:
  $DFESP_HOME/bin/subscribe_client dfESP://localhost:55555/orders_proj/orders_cq/TotalVolume?snapshot=true

  NOTE: The subscription must be started after the model starts.
  Also as soon as the model starts the built in file/socket
  connector begins processing data from orders.csv.
 </description>
 <projects>
  <project name='March_test' pubsub='auto' threads='4'>
   <contqueries>
    <contquery name='March_cq'>
     <windows>
      <window-source name='March' autogen-key='true' insert-only='true'>
       <schema>
        <fields>
         <field name='SEQUENCE' type='int64' key='true' />
<!--         <field name='time' type='stamp'/>-->
         <field name='symbol' type='string'/>
         <field name='actual' type='int32'/>
<!--         <field name='tStamp_secs' type='int64'/>-->
<!--         <field name='tStamp_msecs' type='int32'/>-->
        </fields>
       </schema>
      </window-source>
<!--   <window-aggregate name='aggregateWindow'>-->
<!--       <description>-->
<!--        This is an aggregate window with aggregation expressions.-->
<!--        One expression is the summation of quantity. The other expression-->
<!--        is the maximum of price.-->
<!--       </description>-->
<!--       <schema>-->
<!--        <fields>-->
<!--         <field name='symbol' type='string' key='true'/>-->
<!--         <field name='totalQuant' type='int32'/>-->
<!--&lt;!&ndash;         <field name='maxPrice' type='double'/>&ndash;&gt;-->
<!--        </fields>-->
<!--       </schema>-->
<!--       <output>-->
<!--        <field-expr>ESP_aSum(actual)</field-expr>-->
<!--&lt;!&ndash;        <field-expr>ESP_aMax(price)</field-expr>&ndash;&gt;-->
<!--       </output>-->
<!--     </window-aggregate>-->
<!--      <window-copy name='copy_win'>-->
<!--       <description>-->
<!--        This is a copy window.  The copy window will receive all of the events-->
<!--        from the source window.  Events are only retained for 300 seconds.  The-->
<!--        retention time is calculated using the time field in the event.-->
<!--       </description>-->
<!--       <retention field='time' type='bytime_sliding'>300 seconds</retention>-->
<!--       <connectors>-->
<!--        <connector class='fs' name='sub'>-->
<!--         <properties>-->
<!--          <property name='type'>sub</property>-->
<!--          <property name='fstype'>csv</property>-->
<!--          <property name='fsname'>result.out</property>-->
<!--          <property name='snapshot'>true</property>-->
<!--          <property name='dateformat'>%Y-%m-%d %H:%M:%S</property>-->
<!--         </properties>-->
<!--        </connector>-->
<!--       </connectors>-->
<!--      </window-copy>-->
     </windows>
<!--     <edges>-->
<!--      <edge source='March' target='copy_win'/>-->
<!--     </edges>-->
    </contquery>
   </contqueries>
  </project>
 </projects>
</engine>
