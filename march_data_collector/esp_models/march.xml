<engine port="9901">
  <projects>
    <project name="March_test" pubsub="auto" threads="4">
      <contqueries>
        <contquery name="March_cq">
          <windows>
            <window-join name="joinTemperature_all">
              <join type="inner">
                <conditions>
                  <fields left="time" right="time" />
                </conditions>
              </join>
              <output>
                <field-selection name="dummy_key" source="l_dummy_key" />
                <field-selection name="time" source="l_time" />
                <field-selection name="temperature_left_hip_aa" source="l_temperature_left_hip_aa" />
                <field-selection name="temperature_right_hip_aa" source="l_temperature_right_hip_aa" />
                <field-selection name="temperature_left_hip_fe" source="l_temperature_left_hip_fe" />
                <field-selection name="temperature_right_hip_fe" source="l_temperature_right_hip_fe" />
                <field-selection name="temperature_left_ankle" source="r_temperature_left_ankle" />
                <field-selection name="temperature_right_ankle" source="r_temperature_right_ankle" />
                <field-selection name="temperature_left_knee" source="r_temperature_left_knee" />
                <field-selection name="temperature_right_knee" source="r_temperature_right_knee" />
              </output>
            </window-join>
            <window-join name="joinTemperature_ankle">
              <join type="inner">
                <conditions>
                  <fields left="time" right="time" />
                </conditions>
              </join>
              <output>
                <field-selection name="dummy_key" source="l_dummy_key" />
                <field-selection name="time" source="l_time" />
                <field-selection name="temperature_left_ankle" source="l_temperature" />
                <field-selection name="temperature_right_ankle" source="r_temperature" />
              </output>
            </window-join>
            <window-join name="joinTemperature_ankle_knee">
              <join type="inner">
                <conditions>
                  <fields left="time" right="time" />
                </conditions>
              </join>
              <output>
                <field-selection name="dummy_key" source="l_dummy_key" />
                <field-selection name="time" source="l_time" />
                <field-selection name="temperature_left_ankle" source="l_temperature_left_ankle" />
                <field-selection name="temperature_right_ankle" source="l_temperature_right_ankle" />
                <field-selection name="temperature_left_knee" source="r_temperature_left_knee" />
                <field-selection name="temperature_right_knee" source="r_temperature_right_knee" />
              </output>
            </window-join>
            <window-join name="joinTemperature_hip">
              <join type="inner">
                <conditions>
                  <fields left="time" right="time" />
                </conditions>
              </join>
              <output>
                <field-selection name="dummy_key" source="l_dummy_key" />
                <field-selection name="time" source="l_time" />
                <field-selection name="temperature_left_hip_aa" source="l_temperature_left_hip_aa" />
                <field-selection name="temperature_right_hip_aa" source="l_temperature_right_hip_aa" />
                <field-selection name="temperature_left_hip_fe" source="r_temperature_left_hip_fe" />
                <field-selection name="temperature_right_hip_fe" source="r_temperature_right_hip_fe" />
              </output>
            </window-join>
            <window-join name="joinTemperature_hip_aa">
              <join type="inner">
                <conditions>
                  <fields left="time" right="time" />
                </conditions>
              </join>
              <output>
                <field-selection name="dummy_key" source="l_dummy_key" />
                <field-selection name="time" source="l_time" />
                <field-selection name="temperature_left_hip_aa" source="l_temperature" />
                <field-selection name="temperature_right_hip_aa" source="r_temperature" />
              </output>
            </window-join>
            <window-join name="joinTemperature_hip_fe">
              <join type="inner">
                <conditions>
                  <fields left="time" right="time" />
                </conditions>
              </join>
              <output>
                <field-selection name="dummy_key" source="l_dummy_key" />
                <field-selection name="time" source="l_time" />
                <field-selection name="temperature_left_hip_fe" source="l_temperature" />
                <field-selection name="temperature_right_hip_fe" source="r_temperature" />
              </output>
            </window-join>
            <window-join name="joinTemperature_knee">
              <join type="inner">
                <conditions>
                  <fields left="time" right="time" />
                </conditions>
              </join>
              <output>
                <field-selection name="dummy_key" source="l_dummy_key" />
                <field-selection name="time" source="l_time" />
                <field-selection name="temperature_left_knee" source="l_temperature" />
                <field-selection name="temperature_right_knee" source="r_temperature" />
              </output>
            </window-join>
            <window-join name="joinTemperature" >
              <join type="leftouter" no-regenerates='true'>
                <conditions>
                  <fields left="dummy_key" right="dummy_key" />
                </conditions>
              </join>
              <output>
                <field-selection name="time" source="l_time" />
                <field-selection name="dummy_key" source="l_dummy_key" />
                <field-selection name="actual_positions" source="l_actual_positions" />
                <field-selection name="actual_velocities" source="l_actual_velocities" />
                <field-selection name="desired_positions" source="l_desired_positions" />
                <field-selection name="desired_velocities" source="l_desired_velocities" />
                <field-selection name="motor_current" source="l_motor_current" />
                <field-selection name="motor_voltage" source="l_motor_voltage" />
                <field-selection name="temperature_left_ankle" source="r_temperature_left_ankle" />
                <field-selection name="temperature_left_hip_aa" source="r_temperature_left_hip_aa" />
                <field-selection name="temperature_left_hip_fe" source="r_temperature_left_hip_fe" />
                <field-selection name="temperature_left_knee" source="r_temperature_left_knee" />
                <field-selection name="temperature_right_ankle" source="r_temperature_right_ankle" />
                <field-selection name="temperature_right_hip_aa" source="r_temperature_right_hip_aa" />
                <field-selection name="temperature_right_hip_fe" source="r_temperature_right_hip_fe" />
                <field-selection name="temperature_right_knee" source="r_temperature_right_knee" />
              </output>
            </window-join>
          <window-aggregate name='aggregateTemperature'>
            <schema>
              <fields>
                <field key="true" name="dummy_key" type="int64" />
                <field key="false" name="time" type="stamp" />
                <field key="false" name="temperature_left_ankle" type="double" />
                <field key="false" name="temperature_left_hip_aa" type="double" />
                <field key="false" name="temperature_left_hip_fe" type="double" />
                <field key="false" name="temperature_left_knee" type="double" />
                <field key="false" name="temperature_right_hip_aa" type="double" />
                <field key="false" name="temperature_right_ankle" type="double" />
                <field key="false" name="temperature_right_hip_fe" type="double" />
                <field key="false" name="temperature_right_knee" type="double" />
              </fields>
            </schema>
            <output>
              <field-expr>ESP_aLast(time)</field-expr>
              <field-expr>ESP_aLast(temperature_left_ankle)</field-expr>
              <field-expr>ESP_aLast(temperature_left_hip_aa)</field-expr>
              <field-expr>ESP_aLast(temperature_left_hip_fe)</field-expr>
              <field-expr>ESP_aLast(temperature_left_knee)</field-expr>
              <field-expr>ESP_aLast(temperature_right_ankle)</field-expr>
              <field-expr>ESP_aLast(temperature_right_hip_aa)</field-expr>
              <field-expr>ESP_aLast(temperature_right_hip_fe)</field-expr>
              <field-expr>ESP_aLast(temperature_right_knee)</field-expr>
            </output>
          </window-aggregate>
            <window-aggregate name='aggregateIMC'>
              <schema>
                <fields>
                  <field key="true" name="dummy_key" type="int64" />
                  <field key="false" name="time" type="stamp" />
                  <field key="false" name="motor_current" type="array(dbl)" />
                  <field key="false" name="motor_voltage" type="array(dbl)" />
                </fields>
              </schema>
              <output>
                <field-expr>ESP_aLast(time)</field-expr>
                <field-expr>ESP_aLast(motor_current)</field-expr>
                <field-expr>ESP_aLast(motor_voltage)</field-expr>
              </output>
            </window-aggregate>
            <window-source autogen-key="true" insert-only="true" name="sourceGait">
              <schema>
                <fields>
                  <field key="true" name="SEQUENCE" type="int64" />
                  <field key="false" name="dummy_key" type="int64" />
                  <field key="false" name="time" type="stamp" />
                  <field key="false" name="gait_name" type="string" />
                  <field key="false" name="subgait_name" type="string" />
                  <field key="false" name="version" type="string" />
                </fields>
              </schema>
            </window-source>
            <window-source autogen-key="true" insert-only="true" name="sourceIMC">
              <schema>
                <fields>
                  <field key="true" name="SEQUENCE" type="int64" />
                  <field key="false" name="dummy_key" type="int64" />
                  <field key="false" name="time" type="stamp" />
                  <field key="false" name="motor_current" type="array(dbl)" />
                  <field key="false" name="motor_voltage" type="array(dbl)" />
                </fields>
              </schema>
            </window-source>
            <window-source autogen-key="true" insert-only="true" name="sourceIMU">
              <schema>
                <fields>
                  <field key="true" name="SEQUENCE" type="int64" />
                  <field key="false" name="dummy_key" type="int64" />
                  <field key="false" name="time" type="stamp" />
                  <field key="false" name="orientation" type="array(dbl)" />
                  <field key="false" name="rotational_velocity" type="array(dbl)" />
                  <field key="false" name="linear_acceleration" type="array(dbl)" />
                </fields>
              </schema>
            </window-source>
            <window-source autogen-key="true" insert-only="true" name="sourceJoint">
              <schema>
                <fields>
                  <field key="true" name="SEQUENCE" type="int64" />
                  <field key="false" name="dummy_key" type="int64" />
                  <field key="false" name="time" type="stamp" />
                  <field key="false" name="actual_positions" type="array(dbl)" />
                  <field key="false" name="actual_velocities" type="array(dbl)" />
                  <field key="false" name="desired_positions" type="array(dbl)" />
                  <field key="false" name="desired_velocities" type="array(dbl)" />
                </fields>
              </schema>
            </window-source>
            <window-source autogen-key="true" insert-only="true" name="sourceTemperature_left_ankle">
              <schema>
                <fields>
                  <field key="true" name="SEQUENCE" type="int64" />
                  <field key="false" name="dummy_key" type="int64" />
                  <field key="false" name="time" type="stamp" />
                  <field key="false" name="temperature" type="double" />
                </fields>
              </schema>
            </window-source>
            <window-source autogen-key="true" insert-only="true" name="sourceTemperature_left_hip_aa">
              <schema>
                <fields>
                  <field key="true" name="SEQUENCE" type="int64" />
                  <field key="false" name="dummy_key" type="int64" />
                  <field key="false" name="time" type="stamp" />
                  <field key="false" name="temperature" type="double" />
                </fields>
              </schema>
            </window-source>
            <window-source autogen-key="true" insert-only="true" name="sourceTemperature_left_hip_fe">
              <schema>
                <fields>
                  <field key="true" name="SEQUENCE" type="int64" />
                  <field key="false" name="dummy_key" type="int64" />
                  <field key="false" name="time" type="stamp" />
                  <field key="false" name="temperature" type="double" />
                </fields>
              </schema>
            </window-source>
            <window-source autogen-key="true" insert-only="true" name="sourceTemperature_left_knee">
              <schema>
                <fields>
                  <field key="true" name="SEQUENCE" type="int64" />
                  <field key="false" name="dummy_key" type="int64" />
                  <field key="false" name="time" type="stamp" />
                  <field key="false" name="temperature" type="double" />
                </fields>
              </schema>
            </window-source>
            <window-source autogen-key="true" insert-only="true" name="sourceTemperature_right_ankle">
              <schema>
                <fields>
                  <field key="true" name="SEQUENCE" type="int64" />
                  <field key="false" name="dummy_key" type="int64" />
                  <field key="false" name="time" type="stamp" />
                  <field key="false" name="temperature" type="double" />
                </fields>
              </schema>
            </window-source>
            <window-source autogen-key="true" insert-only="true" name="sourceTemperature_right_hip_aa">
              <schema>
                <fields>
                  <field key="true" name="SEQUENCE" type="int64" />
                  <field key="false" name="dummy_key" type="int64" />
                  <field key="false" name="time" type="stamp" />
                  <field key="false" name="temperature" type="double" />
                </fields>
              </schema>
            </window-source>
            <window-source autogen-key="true" insert-only="true" name="sourceTemperature_right_hip_fe">
              <schema>
                <fields>
                  <field key="true" name="SEQUENCE" type="int64" />
                  <field key="false" name="dummy_key" type="int64" />
                  <field key="false" name="time" type="stamp" />
                  <field key="false" name="temperature" type="double" />
                </fields>
              </schema>
            </window-source>
            <window-source autogen-key="true" insert-only="true" name="sourceTemperature_right_knee">
              <schema>
                <fields>
                  <field key="true" name="SEQUENCE" type="int64" />
                  <field key="false" name="dummy_key" type="int64" />
                  <field key="false" name="time" type="stamp" />
                  <field key="false" name="temperature" type="double" />
                </fields>
              </schema>
            </window-source>
          </windows>
          <edges>
            <edge source="sourceIMC" target="aggregateIMC" />
            <edge source="joinTemperature_all" target="aggregateTemperature" />
            <edge role="left" source="sourceJoint" target="joinIMC" />
            <edge role="right" source="aggregateIMC" target="joinIMC" />
            <edge role="left" source="joinIMC" target="joinTemperature" />
            <edge role="right" source="aggregateTemperature" target="joinTemperature" />
            <edge role="left" source="sourceTemperature_left_ankle" target="joinTemperature_ankle" />
            <edge role="right" source="sourceTemperature_right_ankle" target="joinTemperature_ankle" />
            <edge role="left" source="sourceTemperature_left_hip_aa" target="joinTemperature_hip_aa" />
            <edge role="right" source="sourceTemperature_right_hip_aa" target="joinTemperature_hip_aa" />
            <edge role="left" source="sourceTemperature_left_hip_fe" target="joinTemperature_hip_fe" />
            <edge role="right" source="sourceTemperature_right_hip_fe" target="joinTemperature_hip_fe" />
            <edge role="left" source="sourceTemperature_left_knee" target="joinTemperature_knee" />
            <edge role="right" source="sourceTemperature_right_knee" target="joinTemperature_knee" />
            <edge role="left" source="joinTemperature_ankle" target="joinTemperature_ankle_knee" />
            <edge role="right" source="joinTemperature_knee" target="joinTemperature_ankle_knee" />
            <edge role="left" source="joinTemperature_hip_aa" target="joinTemperature_hip" />
            <edge role="right" source="joinTemperature_hip_fe" target="joinTemperature_hip" />
            <edge role="left" source="joinTemperature_hip" target="joinTemperature_all" />
            <edge role="right" source="joinTemperature_ankle_knee" target="joinTemperature_all" />
          </edges>
        </contquery>
      </contqueries>
    </project>
  </projects>
</engine>
